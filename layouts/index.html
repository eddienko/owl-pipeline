{{ define "main" }}
<section class="section container-fluid mt-n3 pb-3">
  <div class="row justify-content-center">
    <div class="col-lg-12 text-center">
      <h1 class="mt-0">{{ .Title }}</h1>
    </div>
    <div class="col-lg-9 col-xl-8 text-center">
      <p class="lead">{{ .Params.lead | safeHTML }}</p>
      <a class="btn btn-primary btn-lg px-4 mb-2" href='{{ "docs/prologue/introduction/" | relURL }}' role="button">Get
        started</a>
      <p class="meta">Open-source MIT Licensed. <a href="https://github.com/eddienko/owl-pipeline-server">GitHub v{{
          $data := getJSON
          "https://raw.githubusercontent.com/eddienko/owl-pipeline-server/main/package.json" }}{{ $data.version }}</a>
      </p>
    </div>
  </div>
</section>
{{ end }}

{{ define "sidebar-prefooter" }}
<section class="section section-sm">
  <div class="container">
    <div class="row justify-content-center text-center">
      <div class="col-lg-6">
        <h2 class="h4">Owl Server</h2>
        <p>Allow external users to run jobs in a Kubernetes cluster.</p>
      </div>
      <div class="col-lg-6">
        <h2 class="h4">Owl Client</h2>
        <p>Submit parameterized pipelines and custom jobs to the cluster from anywhere.</p>
      </div>
    </div>


  </div>
  </div>
</section>

<section class="section section-sm">
  <div class="container">

    <hr />
    <div class="row">
      <div class="col-md-8">
        <h2 class="h4">Submit pipelines from anywhere</h2>
        <p>Authenticate to the Owl Server and submit jobs that run in a remote Kubernetes cluster.

        </p>
      </div>

      <div class="col-md-8 code-block">
        <pre><code class="language-bash">
# Authenticate
owl login

# Submit pipeline
owl submit pipeline.yml</code></pre>
      </div>
    </div>

    <hr />
    <div class="row">
      <div class="col-md-8">
        <h2 class="h4">Run parameterized pipelines</h2>
        <p>Execute pipelines at scale with user supplied parameters allocating custom server resources.</p>
        <p>Out of the box pipelines include a
          <code>example</code> pipeline, a <code>shell</code> pipeline that executes a command
          or a script and a <code>papermill</code> pipeline that runs a parameterized Jupyter notebook.
        </p>
        <p>More complex pipelines for image analysis and data processing are available in the showcase section.</p>
      </div>

      <div class="col-md-8 code-block">
        <pre><code class="language-yaml">
version: 1

# Name of the pipeline
name: example

# Pipeline arguments
datalen: 100

# Resources requested
resources:
  threads: 10
  workers: 2
  memory: 10
 </code></pre>
      </div>
    </div>

    <hr />
    <div class="row">
      <div class="col-md-8">
        <h2 class="h4">Build reusable pipelines</h2>
        <p>Develop reusable pipelines that can be run with custom parameters.</p>
        <p>Owl pipelines are Python packages that can be installed using pip.</p>
      </div>

      <div class="col-md-8 code-block">
        <pre><code class="language-python">
from dask import delayed
from owl_dev import pipeline
from owl_dev.logging import logger
  
@pipeline
def main(*, datalen: int) -> int:
    logger.info("Computing...")

    output = []
    for x in range(datalen):
        a = delayed(inc)(x)
        b = delayed(double)(x)
        c = delayed(add)(a, b)
        output.append(c)

    total = delayed(sum)(output)
    return total.compute()
 </code></pre>
      </div>
    </div>

  </div>
</section>


{{ end }}

{{ define "sidebar-footer" }}
<section class="section section-sm container-fluid">
  <div class="row justify-content-center text-center">
    <div class="col-lg-9">
      {{- .Content -}}
    </div>
  </div>
</section>
{{ end }}